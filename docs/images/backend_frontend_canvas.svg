<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="520" viewBox="0 0 1000 520">
  <style>
    .title{font:700 20px sans-serif;fill:#111}
    .label{font:13px sans-serif;fill:#111}
    .small{font:12px sans-serif;fill:#333}
    .box{rx:8;ry:8;stroke:#333;stroke-width:1;fill:#fff}
    .box-green{fill:#e7fff2}
    .box-pink{fill:#ffe9e9}
    .box-tan{fill:#fff1e1}
    .arrow{stroke:#111;stroke-width:1.5;marker-end:url(#arrow)}
  </style>
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#111" />
    </marker>
  </defs>
  <rect width="100%" height="100%" fill="#fff"/>
  <text x="500" y="32" text-anchor="middle" class="title">Luồng API → Frontend → Canvas</text>

  <!-- Backend API -->
  <g transform="translate(60,120)">
    <rect class="box box-green" x="0" y="0" width="280" height="120"/>
    <text class="label" x="140" y="30" text-anchor="middle">Backend API (Express :4000)</text>
    <text class="small" x="140" y="56" text-anchor="middle">/api/overview · /api/courses</text>
    <text class="small" x="140" y="76" text-anchor="middle">/api/students/top · /api/heatmap/late</text>
    <text class="small" x="140" y="96" text-anchor="middle">/api/trends/weekly · /api/all</text>
  </g>

  <!-- Frontend -->
  <g transform="translate(380,120)">
    <rect class="box box-pink" x="0" y="0" width="280" height="120"/>
    <text class="label" x="140" y="30" text-anchor="middle">Frontend (React :5173)</text>
    <text class="small" x="140" y="56" text-anchor="middle">VITE_API_PROXY → http://localhost:4000</text>
    <text class="small" x="140" y="76" text-anchor="middle">KPI Cards · Heatmap · Histogram · Trends</text>
  </g>

  <!-- Canvas -->
  <g transform="translate(700,120)">
    <rect class="box box-tan" x="0" y="0" width="240" height="120"/>
    <text class="label" x="120" y="30" text-anchor="middle">Canvas LMS</text>
    <text class="small" x="120" y="56" text-anchor="middle">Route: /learning_analytics</text>
    <text class="small" x="120" y="76" text-anchor="middle">Controller: LearningAnalytics#index</text>
    <text class="small" x="120" y="96" text-anchor="middle">View: iframe → LA_DASHBOARD_URL</text>
  </g>

  <!-- Arrows -->
  <line class="arrow" x1="340" y1="180" x2="380" y2="180"/>
  <line class="arrow" x1="660" y1="180" x2="700" y2="180"/>

  <!-- Notes -->
  <g transform="translate(60,300)">
    <text class="label">Ghi chú</text>
    <text class="small" y="24">- Có thể bật API_KEY ở Backend để chặn truy cập trái phép.</text>
    <text class="small" y="44">- CORS_ORIGIN đặt cụ thể (http://localhost:5173).</text>
  </g>
</svg>

